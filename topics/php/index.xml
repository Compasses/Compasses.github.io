<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Php on 三十重围</title>
    <link>http://compasses.github.io/topics/php/</link>
    <description>Recent content in Php on 三十重围</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-EN</language>
    <managingEditor>gnhe2009@gmail.com (Jet He)</managingEditor>
    <webMaster>gnhe2009@gmail.com (Jet He)</webMaster>
    <copyright>(c) 2015 Jet He.</copyright>
    <lastBuildDate>Sat, 18 Jul 2015 18:45:07 +0800</lastBuildDate>
    <atom:link href="http://compasses.github.io/topics/php/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>PHP 框架之CodeIgniter &amp; Laravel</title>
      <link>http://compasses.github.io/2015/07/18/php-%E6%A1%86%E6%9E%B6%E4%B9%8Bcodeigniter--laravel/</link>
      <pubDate>Sat, 18 Jul 2015 18:45:07 +0800</pubDate>
      <author>gnhe2009@gmail.com (Jet He)</author>
      <guid>http://compasses.github.io/2015/07/18/php-%E6%A1%86%E6%9E%B6%E4%B9%8Bcodeigniter--laravel/</guid>
      <description>

&lt;h1 id=&#34;说明:08afb798474a9037df6f2df800659b05&#34;&gt;说明&lt;/h1&gt;

&lt;p&gt;最近产品考虑更换前端框架，重点考察了CodeIgniter 和 Laravel两个框架，现对其进行下对比分析。&lt;/p&gt;

&lt;h1 id=&#34;总体对比:08afb798474a9037df6f2df800659b05&#34;&gt;总体对比&lt;/h1&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;CodeIgniter&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;Laravel&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Document&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Good enough&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Good enough&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;Performance&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;差不多 3倍于 Laravel&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;MVC&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Good enough&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Good enough&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;TWIG&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;自己添加 TWIG lib&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;使用三方插件&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;third-party&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;自己添加，放到指定目录&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;composer managment&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;Route&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;default mapping ：&amp;raquo;example.com/class/function/id/&amp;raquo; can be remap, more code than Laravel&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Simple and clear&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;summary&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;简单 精巧&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;易用，更为丰满&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;CodeIgniter 基本上是个MVC的空架子，代码量极小，开发的花基本上 100%的掌控在自己手里。 Laravel还是加载了不少的三方 component，比CodeIgniter 庞大些。
对MVC的支持都很清晰，URL的路由也很简单易扩展。&lt;/p&gt;

&lt;h1 id=&#34;测试环境:08afb798474a9037df6f2df800659b05&#34;&gt;测试环境：&lt;/h1&gt;

&lt;p&gt;主要是使用了Laravel 的HomeStead环境，通过virtual box + vagrant标准用法，加载Laravel的框架代码；要使其加载CodeIgniter框架，需要修改Nginx的配置，增加新的server，只要端口号换成新的，root指定到CodeIgniter的跟目录即可。
总体上是Nginx+php5-fpm+mysql+ Ubuntu + CodeIgniter 源码包 + Laravel 源码包。源码包共享在本机上。&lt;/p&gt;

&lt;h1 id=&#34;测试页面:08afb798474a9037df6f2df800659b05&#34;&gt;测试页面：&lt;/h1&gt;

&lt;p&gt;Modal：使用product数据，获取某个product上的所有信息。
View：引入Twig模板引擎，创建几个twig模板，在controller层render。
Controller：调用modal获取数据，使用 twig render 页面。&lt;/p&gt;

&lt;p&gt;这两个框架都用非常清晰的 MVC结构，上述页面的代码几乎可以在两者之间无缝迁移。&lt;/p&gt;

&lt;h1 id=&#34;性能对比测试:08afb798474a9037df6f2df800659b05&#34;&gt;性能对比测试：&lt;/h1&gt;

&lt;p&gt;针对这个页面进行性能测试：页面大小为 8KB， 加载一个已有的CSS文件大小为 87.7KB。
使用Apache的ab test进行测试：
AB test:
ab -n 1000 -c 80 &lt;a href=&#34;http://192.168.10.10:8080/productdetail/&#34;&gt;http://192.168.10.10:8080/productdetail/&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&#34;laravel-结果:08afb798474a9037df6f2df800659b05&#34;&gt;Laravel 结果:&lt;/h2&gt;

&lt;p&gt;Server Software:        nginx/1.8.0
Server Hostname:        192.168.10.10
Server Port:            80&lt;/p&gt;

&lt;p&gt;Document Path:          /product/
Document Length:        200205 bytes&lt;/p&gt;

&lt;p&gt;Concurrency Level:      80
Time taken for tests:   112.455 seconds
Complete requests:      1000
Failed requests:        0
Total transferred:      200793036 bytes
HTML transferred:       200205000 bytes
Requests per second:    8.89 &lt;a href=&#34;mean&#34;&gt;#/sec&lt;/a&gt;
Time per request:       8996.416 &lt;a href=&#34;mean&#34;&gt;ms&lt;/a&gt;
Time per request:       112.455 &lt;a href=&#34;mean, across all concurrent requests&#34;&gt;ms&lt;/a&gt;
Transfer rate:          1743.69 [Kbytes/sec] received&lt;/p&gt;

&lt;p&gt;Connection Times (ms)&lt;/p&gt;

&lt;p&gt;min  mean[+/-sd] median   max
Connect:        0    1   1.0      0      18
Processing:  2001 8604 1574.3   8488   17271
Waiting:     1999 8594 1572.4   8480   17269
Total:       2005 8604 1574.0   8490   17271
WARNING: The median and mean for the initial connection time are not within a normal deviation&lt;/p&gt;

&lt;p&gt;These results are probably not that reliable.&lt;/p&gt;

&lt;p&gt;Percentage of the requests served within a certain time (ms)&lt;/p&gt;

&lt;p&gt;50%   8490&lt;/p&gt;

&lt;p&gt;66%   8695&lt;/p&gt;

&lt;p&gt;75%   8960&lt;/p&gt;

&lt;p&gt;80%   9098&lt;/p&gt;

&lt;p&gt;90%   9951&lt;/p&gt;

&lt;p&gt;95%  12074&lt;/p&gt;

&lt;p&gt;98%  12548&lt;/p&gt;

&lt;p&gt;99%  12944&lt;/p&gt;

&lt;p&gt;100%  17271 (longest request)&lt;/p&gt;

&lt;h2 id=&#34;codeigniter-结果:08afb798474a9037df6f2df800659b05&#34;&gt;CodeIgniter 结果:&lt;/h2&gt;

&lt;p&gt;Server Software:        nginx/1.8.0
Server Hostname:        192.168.10.10
Server Port:            8080&lt;/p&gt;

&lt;p&gt;Document Path:          /productdetail/
Document Length:        200205 bytes&lt;/p&gt;

&lt;p&gt;Concurrency Level:      80
Time taken for tests:   40.332 seconds
Complete requests:      1000
Failed requests:        0
Total transferred:      200341000 bytes
HTML transferred:       200205000 bytes
Requests per second:    24.79 &lt;a href=&#34;mean&#34;&gt;#/sec&lt;/a&gt;
Time per request:       3226.569 &lt;a href=&#34;mean&#34;&gt;ms&lt;/a&gt;
Time per request:       40.332 &lt;a href=&#34;mean, across all concurrent requests&#34;&gt;ms&lt;/a&gt;
Transfer rate:          4850.86 [Kbytes/sec] received&lt;/p&gt;

&lt;p&gt;Connection Times (ms)&lt;/p&gt;

&lt;p&gt;min  mean[+/-sd] median   max
Connect:        0    1   1.3      0      23
Processing:   346 3097 456.3   3169    3649
Waiting:      343 3089 455.7   3161    3645
Total:        351 3098 455.5   3170    3649&lt;/p&gt;

&lt;p&gt;Percentage of the requests served within a certain time (ms)&lt;/p&gt;

&lt;p&gt;50%   3170&lt;/p&gt;

&lt;p&gt;66%   3216&lt;/p&gt;

&lt;p&gt;75%   3250&lt;/p&gt;

&lt;p&gt;80%   3270&lt;/p&gt;

&lt;p&gt;90%   3326&lt;/p&gt;

&lt;p&gt;95%   3467&lt;/p&gt;

&lt;p&gt;98%   3551&lt;/p&gt;

&lt;p&gt;99%   3582&lt;/p&gt;

&lt;p&gt;100%   3649 (longest request)&lt;/p&gt;

&lt;h1 id=&#34;总结:08afb798474a9037df6f2df800659b05&#34;&gt;总结&lt;/h1&gt;

&lt;p&gt;CodeIgniter 更轻便，代码可以做到100%掌控；Laravel相比CodeIgniter更加丰满些，使用composer管理扩展性增强了不少。
如果选择从头开始的话，感觉CodeIgniter更好些。&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>